# ğŸ¯ Vercel éƒ¨ç½² - æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

## é—®é¢˜æ ¹æº
**ä¾èµ–ç‰ˆæœ¬ä¸åŒ¹é…ï¼** æœ¬åœ°è¿è¡Œçš„åŒ…ç‰ˆæœ¬å’Œ requirements.txt ä¸ä¸€è‡´ï¼Œå¯¼è‡´ Vercel éƒ¨ç½²æ—¶å´©æºƒã€‚

## âœ… å·²ä¿®å¤

### 1. æ›´æ–° requirements.txt ä¸ºæœ¬åœ°å·¥ä½œç‰ˆæœ¬
```
Flask==3.1.2      (ä¹‹å‰: 3.0.0)
openai==2.3.0     (ä¹‹å‰: 1.12.0)
dashscope==1.24.6 (ä¹‹å‰: 1.17.0)
Werkzeug==3.1.3   (ä¹‹å‰: 3.0.1)
```

### 2. ä¼˜åŒ– vercel.json é…ç½®
- å¢åŠ äº† Lambda å†…å­˜: 3008MB
- è®¾ç½®æœ€å¤§æ‰§è¡Œæ—¶é—´: 60ç§’
- æ·»åŠ é™æ€æ–‡ä»¶è·¯ç”±

### 3. æ”¹è¿› api/index.py å…¥å£ç‚¹
- æ›´æ˜ç¡®çš„è·¯å¾„è§£æ
- æ·»åŠ ç¯å¢ƒå˜é‡æ£€æŸ¥è­¦å‘Š

### 4. æ·»åŠ  .python-version æ–‡ä»¶
æŒ‡å®š Python 3.11 ç‰ˆæœ¬

## ğŸš€ ç«‹å³éƒ¨ç½²

```powershell
# æäº¤æ›´æ”¹
git add .
git commit -m "Fix dependency versions and Vercel configuration"
git push origin main
```

ç„¶ååœ¨ Vercel ç½‘ç«™:
1. è¿›å…¥é¡¹ç›®
2. ç‚¹å‡» "Deployments" æ ‡ç­¾
3. ç‚¹å‡»æœ€æ–°éƒ¨ç½²æ—è¾¹çš„ "Redeploy"
4. é€‰æ‹© "Redeploy" (ä¸è¦é€‰æ‹© Use existing build cache)

## ğŸ” è¯Šæ–­å·¥å…·

è¿è¡Œæœ¬åœ°è¯Šæ–­è„šæœ¬:
```powershell
python diagnose.py
```

è¿™ä¼šæ£€æŸ¥:
- âœ“ Python ç‰ˆæœ¬
- âœ“ ä¾èµ–åŒ…å®‰è£…
- âœ“ ç¯å¢ƒå˜é‡
- âœ“ App å¯¼å…¥
- âœ“ è·¯ç”±æ³¨å†Œ
- âœ“ åŸºæœ¬åŠŸèƒ½

## ğŸ“‹ å…³é”®æ–‡ä»¶

### requirements.txt (å·²æ›´æ–°)
```
Flask==3.1.2
openai==2.3.0
dashscope==1.24.6
Werkzeug==3.1.3
```

### vercel.json (å·²ä¼˜åŒ–)
```json
{
  "builds": [{"src": "api/index.py", "use": "@vercel/python"}],
  "routes": [
    {"src": "/static/(.*)", "dest": "/static/$1"},
    {"src": "/(.*)", "dest": "api/index.py"}
  ],
  "functions": {
    "api/index.py": {
      "memory": 3008,
      "maxDuration": 60
    }
  }
}
```

### .python-version (æ–°å»º)
```
3.11
```

## âš ï¸ å¦‚æœè¿˜æ˜¯å´©æºƒ

### æ­¥éª¤1: æŸ¥çœ‹ Vercel é”™è¯¯æ—¥å¿—
1. è¿›å…¥ Vercel é¡¹ç›®é¡µé¢
2. ç‚¹å‡»å¤±è´¥çš„éƒ¨ç½²
3. æŸ¥çœ‹ "Function Logs" æˆ– "Build Logs"
4. å¤åˆ¶å…·ä½“é”™è¯¯ä¿¡æ¯

### æ­¥éª¤2: æ£€æŸ¥ç¯å¢ƒå˜é‡
åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­:
- Settings â†’ Environment Variables
- ç¡®è®¤ `DASHSCOPE_API_KEY` å­˜åœ¨ä¸”æ­£ç¡®
- ç¡®è®¤å®ƒåº”ç”¨åˆ°äº† Production, Preview, Development

### æ­¥éª¤3: æ¸…é™¤æ„å»ºç¼“å­˜
å¼ºåˆ¶é‡æ–°æ„å»º:
```powershell
# å¦‚æœå®‰è£…äº† Vercel CLI
vercel --prod --force

# æˆ–åœ¨ Vercel ç½‘ç«™
# Redeploy â†’ å–æ¶ˆå‹¾é€‰ "Use existing build cache"
```

## ğŸ‰ é¢„æœŸç»“æœ

éƒ¨ç½²æˆåŠŸå:
- âœ… ä¸»é¡µåŠ è½½
- âœ… å¥åº·å’¨è¯¢åŠŸèƒ½
- âœ… å‹å¥½èŠå¤©åŠŸèƒ½  
- âœ… ç”¨æˆ·èµ„æ–™å¼•å¯¼
- âš ï¸ éŸ³é¢‘åŠŸèƒ½ï¼ˆåœ¨ serverless ä¸Šæœ‰é™åˆ¶ï¼‰

## ğŸ’¡ è¯Šæ–­ç»“æœ
```
æœ¬åœ°æµ‹è¯•: âœ“ æ‰€æœ‰æ£€æŸ¥é€šè¿‡
- Python 3.11.5
- æ‰€æœ‰ä¾èµ–æ­£ç¡®å®‰è£…
- ç¯å¢ƒå˜é‡å·²è®¾ç½®
- Flask app æ­£å¸¸å·¥ä½œ
- æ‰€æœ‰è·¯ç”±å·²æ³¨å†Œ
```

ç°åœ¨éƒ¨ç½²åº”è¯¥æˆåŠŸï¼ğŸš€
